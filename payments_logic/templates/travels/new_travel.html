{% extends 'base.html' %}
{% block title %}Новое путешествие{% endblock %}
{% block content %}
    <script>
        function toggle(source) {
            const checkboxes = document.getElementsByName('travelers');
            let i = 0, n = checkboxes.length;
            for (; i < n; i++) {
                checkboxes[i].checked = source.checked;
            }
        }
    </script>
    <h1>Новое путешествие</h1>
    <form class="g-3" method="POST">{% csrf_token %}
        <fieldset>
            <div class="row mb-3">
                <div class="col">

                    <label class="form-label" for="{{ form.title.auto_id }}">{{ form.title.label }}</label>
                    {{ form.title }}
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <label class="form-label" for="{{ form.start_date.auto_id }}">{{ form.start_date.label }}</label>
                    {{ form.start_date }}
                </div>
                <div class="col">
                    <label class="form-label" for="{{ form.end_date.auto_id }}">{{ form.end_date.label }}</label>
                    {{ form.end_date }}
                </div>
            </div>
            {% if 'date_validation' in form.errors %}
                <div class="row mb-3">
                    <div class="col">
                        <p><b>{{ form.errors.date_validation }}</b></p>
                    </div>
                </div>
            {% endif %}
            <div class="row mb-3">

                <h5>{{ form.travelers.label }}</h5>
                <div class="form-check">

                    <label for="check_all_travelers"><input type="checkbox" onClick="toggle(this)"
                                                            id="check_all_travelers">
                        Выбрать всех</label>
                </div>

                {% for traveler in form.travelers %}
                    <div class="form-check">
                        {{ traveler }}
                    </div>
                {% endfor %}
                <p><a href="{% url 'new_person' %}" class="btn btn-outline-success">Добавить человека</a></p>
            </div>
            <br>
            <button type="submit" class="btn btn-outline-primary">Создать</button>
            {{ form.errors }}
        </fieldset>
    </form>
{% endblock %}